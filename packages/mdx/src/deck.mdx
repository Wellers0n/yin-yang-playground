import Code from "mdx-code";
import { Head, Image, Appear } from "mdx-deck";

export { default as theme } from "./theme";

import { Cover } from "./Cover";
import { Intro } from "./Intro";
import { Img } from "./Img";
import { Thanks } from "./Thanks";

<Head>
  <title>GraphQL</title>
</Head>

<Cover />

---

<Intro />

---

# Motivation

<ul>
    <div>Data fetching</div>
    <div>Pagination with cursor</div>
    <div>Documentation</div>
</ul>

---

# Overview

<ul>
    <div>What is GraphQL ?</div>
    <div>Under fetching</div>
    <div>Over fetching</div>
    <div>Query</div>
    <div>Mutation</div>
    <div>URL version</div>
    <div>GraphQL Object Type</div>
    <div>Types</div>
    <div>Request numbers</div>
    <div>Cursor</div>
    <div>Documentation</div>
    <div>Code</div>
</ul>

---

## GraphQL vs REST

<Img src="./img/graphql-vs-rest.jpeg" width={1000} />

---

## What is an Under fetching

Under fetching is when you get less data than you need

---

## What is an Over fetching

It's when you get more data than you need (like some fields on the JSON that you don't need)

---

## How does a query work?

<div>We need to get some data</div>

<ul>
    <div>Name</div>
    <div>Email</div>
    <div>Description</div>
</ul>

---

### REST api request

<div>https://fix.dev/api/user/60f291031a6d0b68dc2a149b/</div>
<Img src="./img/api-response.png" width={850} />

---

### GraphQL Query type

<Img src="./img/query-type.png" width={1000} />

---

### GraphQL api request

<div>GraphQL query</div>

<Img src="./img/graphql-request.png" width={1000} />

---

### GraphQL api response

<div>GraphQL response</div>

<Img src="./img/graphql-response.png" width={1000} />

---

### How does a mutation work?

###### rest vs graphql

---

### Delete an user

<Img src="./img/delete-user.png" width={1000} />

---

### define a mutation

<Img src="./img/mutation.png" width={800} />


---

### Using mutation

<Img src="./img/mutation-delete-user.png" width={1000} />


---
### Mutation response

<Img src="./img/mutation-response.png" width={1000} />


---

### fetch N endpoints

---

### Get users list and user

<Img src="./img/fetch-users.png" width={800} />


---

### With Graphql

<Img src="./img/fetch-graphql.png" width={800} />

---

### URL version

<ul>
    <div>https://fix.dev/api/v1/user/1/</div>
    <div>https://fix.dev/api/v2/user/2/</div>
    <div>https://fix.dev/api/v3/user/3/</div>
</ul>

---

### GraphQL Object Type

<Img src="./img/graphql-objectType.png" width={750} />

---

### Types

<Img src="./img/fields.png" width={750} />

---

### Request numbers

<Img src="./img/api-response.png" width={750} />

---

### With GraphQL

<Img src="./img/organization.png" width={750} />

---

### Response

<Img src="./img/organization-response.png" width={750} />

---

### Pagination

#### Offset vs Cursor

---

### Cursor

<Img src="./img/cursor.png" width={750} />

---


### Delete Sam Drunk photos #1 and #2

<Img src="./img/book-pagination-1.png" width={750} />

---

### Page 2 no cat photos

<Img src="./img/book-pagination-2.png" width={750} />

---

### Documentation

<Img src="./img/documentation.png" width={400} />

---

### Documentation user

<Img src="./img/documentation-user.png" width={600} />

---


## References

- [Is offset pagination dead?](https://uxdesign.cc/why-facebook-says-cursor-pagination-is-the-greatest-d6b98d86b6c0)
- [Explaining GraphQL Connections](https://www.apollographql.com/blog/graphql/explaining-graphql-connections/)
- [How to implement Pagination and Mutation in GraphQL](https://buddy.works/tutorials/how-to-implement-pagination-and-mutation-in-graphql)
- [A deep dive into the Relay store](https://yashmahalwal.medium.com/a-deep-dive-into-the-relay-store-9388affd2c2b)

---

# Thanks